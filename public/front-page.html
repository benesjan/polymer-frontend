<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="bower_components/paper-toolbar/paper-toolbar.html">

<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="bower_components/paper-styles/color.html">
<link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="bower_components/paper-scroll-header-panel/demo/sample-content.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="bower_components/paper-input/paper-input.html">
<link rel="import" href="bower_components/gold-email-input/gold-email-input.html">
<link rel="import" href="bower_components/polymerfire/firebase-auth.html">

<link rel="stylesheet" href="bower_components/paper-styles/demo.css">

<dom-module id="front-page">
    <template>

        <style>
            paper-scroll-header-panel {
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                background-color: var(--paper-grey-200, #eee);

                /* background for toolbar when it is at its full size */
                --paper-scroll-header-panel-full-header: {
                    background-image: url(bower_components/paper-scroll-header-panel/demo/images/bg4.jpg);
                };

                /* background for toolbar when it is condensed */
                --paper-scroll-header-panel-condensed-header: {
                    background-color: var(--paper-light-blue-600);
                };
            }

            paper-toolbar {
                /* custom toolbar height */
                height: 256px;
                background-color: transparent;
                overflow: visible;
            }

            paper-icon-button {
                margin: 0 8px;
                --paper-icon-button-ink-color: white;
            }

            .bottom-text {
                -webkit-transform: translateZ(0);
                transform: translateZ(0);

                font-size: 20px;
                padding-bottom: 10px;
            }

            .subtitle {
                padding-top: 4px;
                font-size: 16px;
                color: #ccc;
            }

            .bookmark {
                position: absolute;
                bottom: -24px;
                right: 24px;
                fill: #4285f4;
                height: 48px;
                width: 48px;
            }

            .content {
                padding: 16px 10px 16px 50px;
            }

            .indent {
                margin-left: 60px;
            }

            .spacer {
                @apply(--layout-flex);
            }
        </style>

        <!-- `keepCondensedHeader` makes the condensed header to not scroll away -->
        <paper-scroll-header-panel condenses keep-condensed-header header-height="256" condensed-header-height="140">

            <paper-toolbar>

                <paper-icon-button icon="arrow-back"></paper-icon-button>
                <div class="spacer"></div>
                <paper-button raised onclick="modal.open()">Login</paper-button>
                <paper-button raised>Jsem lékař</paper-button>
                <div class="bottom indent bottom-text" self-end>
                    <div>Bezcekani.cz</div>
                    <div class="subtitle">Objednáme Vás</div>
                </div>
                <iron-icon class="bottom bookmark" icon="bookmark"></iron-icon>

            </paper-toolbar>

            <div class="content">

                Seznam doktorů

            </div>

        </paper-scroll-header-panel>

        <firebase-auth id="auth" user="{{user}}" app-name="doctor-appointment-system" provider="password"
                       signed-in="{{signedIn}}"></firebase-auth>

        <paper-dialog id="modal" modal>
            <div>
                <gold-email-input error-message="Špatný formát" value="{{email}}" label="Vaše emailová adresa" auto-validate required></gold-email-input>
                <paper-input value="{{password}}" label="Heslo" type="password"></paper-input>
                <!--<paper-input label="Potvrďte heslo" type="password"></paper-input>-->
            </div>
            <div class="buttons">
                <paper-button dialog-confirm autofocus on-tap="createUserWithEmailAndPassword">Registrovat
                </paper-button>
            </div>
        </paper-dialog>


    </template>

    <script>
        Polymer({
            is: 'front-page',

            properties: {
                email: String,
                password: String,

                signedIn: {
                    type: Boolean,
                    notify: true, // fires signedIn-changed event TODO: change login button to logout

                },

                userEmail: {
                    type: String,
                    value: "Nijaká"
                }
            },

            createUserWithEmailAndPassword: function () {

                this.$.auth.createUserWithEmailAndPassword(this.email, this.password);

/*                if(this.$.auth.user != null) {
                    console.log(this.$.auth.user)
                    this.properties.userEmail = this.$.auth.user.email;
                }*/
            }
        });
    </script>
</dom-module>