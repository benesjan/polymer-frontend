<link rel="import" href="/bower_components/polymer/polymer.html">

<link rel="import" href="/bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">

<dom-module id="login-required-element">
    <template>
        <style>
            :host {
                display: block;
                padding: 10px 20px;
                text-align: center;
            }

            h1 {
                font-size: 2.8em;
                color: #aaaaab;
                margin-bottom: 0.8em;
                margin-top: 10vh;
                letter-spacing: 0.02em;
                font-weight: 100;
                display: inline-block;
                padding: 0.2em 0.5em;
                border-bottom: 1px solid #e0e0e1;
            }

            paper-button {
                margin: 1em auto;
                width: 12em;
                display: block;
                background-color: var(--app-green-color);
                color: #fff;
            }

            #no-account-label {
                color: #aaaaab;
                margin: 5.5em auto 0.2em auto;
            }

            a {
                text-decoration: none;
                color: var(--app-green-color);
                font-size: 1.35em;
            }

            a:hover {
                text-decoration: underline;
            }

            @media only screen and (max-width: 767px) {
                h1 {
                    font-size: 1.5em;
                    margin-top: 1em;
                    padding-bottom: 0.65em;
                }
            }

        </style>

        <firebase-auth id="auth" app-name="doctor-appointment-system" status-known="{{statusKnown}}"
                       user="{{user}}"></firebase-auth>

        <div hidden="[[loggedIn]]">
            <h1>Tato stránka využaduje přihlášení</h1>
            <br>
            <paper-button raised on-tap="showLoginDialog">Přihlásit se</paper-button>
            <div id="no-account-label">Nemáte účet?</div>
            <a href="/registration">Zaregistrujte se</a>
        </div>

    </template>

    <script>
        Polymer({
            is: 'login-required-element',

            properties: {
                loggedIn: {
                    type: Boolean,
                    computed: 'computeLoggedInProperty(statusKnown, user)',
                    notify: true
                },

                user: {
                    notify: true
                }
            },

            computeLoggedInProperty: function (statusKnown, user) {
                return (statusKnown && !!user);
            },

            showLoginDialog: function () {
                this.fire("show-dialog", {path: "", viewName: "login", open: true})
            }
        });
    </script>
</dom-module>
